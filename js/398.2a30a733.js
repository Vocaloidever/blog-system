"use strict";(self["webpackChunkblog_system"]=self["webpackChunkblog_system"]||[]).push([[398],{6398:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});l(4114);var t=l(6768),n=l(4232);const i={class:"my-articles-container"},r={class:"page-header"},o={class:"filter-bar"},u={class:"pagination-container"};function d(e,a,l,d,s,c){const h=(0,t.g2)("el-button"),g=(0,t.g2)("el-option"),p=(0,t.g2)("el-select"),b=(0,t.g2)("el-input"),v=(0,t.g2)("router-link"),m=(0,t.g2)("el-tag"),f=(0,t.g2)("el-table-column"),k=(0,t.g2)("el-table"),C=(0,t.g2)("el-pagination"),F=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.Lk)("div",r,[a[5]||(a[5]=(0,t.Lk)("h1",null,"我的文章",-1)),(0,t.bF)(h,{type:"primary",onClick:a[0]||(a[0]=a=>e.$router.push("/publish"))},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.Lk)("i",{class:"el-icon-plus"},null,-1),(0,t.eW)(" 发布新文章 ")]))),_:1,__:[4]})]),(0,t.Lk)("div",o,[(0,t.bF)(p,{modelValue:d.statusFilter,"onUpdate:modelValue":a[1]||(a[1]=e=>d.statusFilter=e),placeholder:"文章状态",onChange:d.handleFilterChange},{default:(0,t.k6)((()=>[(0,t.bF)(g,{label:"全部",value:""}),(0,t.bF)(g,{label:"已发布",value:"published"}),(0,t.bF)(g,{label:"草稿",value:"draft"})])),_:1},8,["modelValue","onChange"]),(0,t.bF)(p,{modelValue:d.categoryFilter,"onUpdate:modelValue":a[2]||(a[2]=e=>d.categoryFilter=e),placeholder:"文章分类",onChange:d.handleFilterChange},{default:(0,t.k6)((()=>[(0,t.bF)(g,{label:"全部分类",value:""}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.categories,(e=>((0,t.uX)(),(0,t.Wv)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,t.bF)(b,{modelValue:d.searchKeyword,"onUpdate:modelValue":a[3]||(a[3]=e=>d.searchKeyword=e),placeholder:"搜索文章标题","prefix-icon":"el-icon-search",clearable:"",onInput:d.handleSearch},null,8,["modelValue","onInput"])]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(k,{data:d.articles,style:{width:"100%"},border:""},{default:(0,t.k6)((()=>[(0,t.bF)(f,{prop:"title",label:"文章标题","min-width":"200"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(v,{to:`/article/${e.id}`,class:"article-title-link"},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.title),1)])),_:2},1032,["to"]),"draft"===e.status?((0,t.uX)(),(0,t.Wv)(m,{key:0,size:"small",type:"info"},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("草稿")]))),_:1,__:[6]})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(f,{prop:"category",label:"分类",width:"100"}),(0,t.bF)(f,{prop:"publishDate",label:"发布日期",width:"120"}),(0,t.bF)(f,{prop:"viewCount",label:"阅读量",width:"100",sortable:""}),(0,t.bF)(f,{prop:"commentCount",label:"评论数",width:"100",sortable:""}),(0,t.bF)(f,{label:"操作",width:"200",fixed:"right"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(h,{size:"small",type:"primary",onClick:a=>d.editArticle(e.id),plain:""},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)(" 编辑 ")]))),_:2,__:[7]},1032,["onClick"]),(0,t.bF)(h,{size:"small",type:"danger",onClick:a=>d.deleteArticle(e.id),plain:""},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)(" 删除 ")]))),_:2,__:[8]},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[F,d.loading]]),(0,t.Lk)("div",u,[(0,t.bF)(C,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:d.total,"page-size":d.pageSize,"page-sizes":[10,20,50],"current-page":d.currentPage,onSizeChange:d.handleSizeChange,onCurrentChange:d.handlePageChange},null,8,["total","page-size","current-page","onSizeChange","onCurrentChange"])])])}l(8111),l(2489);var s=l(144),c=l(1387),h=l(2933),g=l(1219),p={name:"MyArticlesView",setup(){const e=(0,c.rd)(),a=(0,s.KR)(!1),l=(0,s.KR)([]),n=(0,s.KR)(0),i=(0,s.KR)(1),r=(0,s.KR)(10),o=(0,s.KR)(""),u=(0,s.KR)(""),d=(0,s.KR)(""),p=[{id:"1",name:"技术"},{id:"2",name:"生活"},{id:"3",name:"随笔"},{id:"4",name:"教程"}],b=()=>{a.value=!0;i.value,r.value,o.value,u.value,d.value;setTimeout((()=>{const e=Array.from({length:r.value},((e,a)=>({id:`${i.value}-${a}`,title:`我的文章标题 ${i.value}-${a}`,category:p[Math.floor(Math.random()*p.length)].name,publishDate:(new Date).toLocaleDateString(),viewCount:Math.floor(1e3*Math.random()),commentCount:Math.floor(50*Math.random()),status:a%5===0?"draft":"published"})));l.value=e,n.value=85,a.value=!1}),500)},v=a=>{e.push(`/edit/${a}`)},m=e=>{h.s.confirm("确定要删除这篇文章吗？此操作不可恢复","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{setTimeout((()=>{l.value=l.value.filter((a=>a.id!==e)),g.nk.success("文章已删除")}),500)})).catch((()=>{}))},f=()=>{i.value=1,b()},k=()=>{i.value=1,b()},C=e=>{i.value=e,b()},F=e=>{r.value=e,i.value=1,b()};return(0,t.sV)((()=>{b()})),{loading:a,articles:l,total:n,currentPage:i,pageSize:r,statusFilter:o,categoryFilter:u,searchKeyword:d,categories:p,editArticle:v,deleteArticle:m,handleFilterChange:f,handleSearch:k,handlePageChange:C,handleSizeChange:F}}},b=l(1241);const v=(0,b.A)(p,[["render",d],["__scopeId","data-v-a3792ab8"]]);var m=v}}]);
//# sourceMappingURL=398.2a30a733.js.map