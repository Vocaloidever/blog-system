"use strict";(self["webpackChunkblog_system"]=self["webpackChunkblog_system"]||[]).push([[209],{6590:function(e,l,a){a.r(l),a.d(l,{default:function(){return _}});a(4114);var t=a(6768),n=a(4232);const u={class:"search-container"},r={class:"search-header"},o={class:"filter-bar"},i={class:"search-results"},s={key:0},c=["onClick"],v=["innerHTML"],d={class:"result-meta"},h={key:1},m={class:"comment-result"},g=["innerHTML"],p={class:"comment-article"},k=["onClick"],y={class:"result-meta"},b={class:"pagination-container"};function C(e,l,a,C,L,F){const f=(0,t.g2)("el-option"),w=(0,t.g2)("el-select"),K=(0,t.g2)("el-empty"),$=(0,t.g2)("el-pagination");return(0,t.uX)(),(0,t.CE)("div",u,[(0,t.Lk)("div",r,[(0,t.Lk)("h1",null,'搜索结果: "'+(0,n.v_)(C.searchKeyword)+'"',1),(0,t.Lk)("p",null,"找到 "+(0,n.v_)(C.total)+" 条相关结果",1)]),(0,t.Lk)("div",o,[(0,t.bF)(w,{modelValue:C.contentType,"onUpdate:modelValue":l[0]||(l[0]=e=>C.contentType=e),placeholder:"内容类型",onChange:C.handleFilterChange},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"全部内容",value:"all"}),(0,t.bF)(f,{label:"文章",value:"article"}),(0,t.bF)(f,{label:"评论",value:"comment"})])),_:1},8,["modelValue","onChange"]),(0,t.bF)(w,{modelValue:C.categoryFilter,"onUpdate:modelValue":l[1]||(l[1]=e=>C.categoryFilter=e),placeholder:"文章分类",onChange:C.handleFilterChange},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"全部分类",value:""}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(C.categories,(e=>((0,t.uX)(),(0,t.Wv)(f,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,t.bF)(w,{modelValue:C.timeFilter,"onUpdate:modelValue":l[2]||(l[2]=e=>C.timeFilter=e),placeholder:"时间范围",onChange:C.handleFilterChange},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"全部时间",value:"all"}),(0,t.bF)(f,{label:"最近一周",value:"week"}),(0,t.bF)(f,{label:"最近一月",value:"month"}),(0,t.bF)(f,{label:"最近一年",value:"year"})])),_:1},8,["modelValue","onChange"]),(0,t.bF)(w,{modelValue:C.sortOption,"onUpdate:modelValue":l[3]||(l[3]=e=>C.sortOption=e),placeholder:"排序方式",onChange:C.handleFilterChange},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"相关度",value:"relevance"}),(0,t.bF)(f,{label:"最新发布",value:"newest"}),(0,t.bF)(f,{label:"最多阅读",value:"most-read"})])),_:1},8,["modelValue","onChange"])]),(0,t.Lk)("div",i,[0===C.results.length?((0,t.uX)(),(0,t.Wv)(K,{key:0,description:"未找到相关内容"})):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},["all"===C.contentType||"article"===C.contentType?((0,t.uX)(),(0,t.CE)("div",s,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(C.articleResults,(a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"result-item"},[l[8]||(l[8]=(0,t.Lk)("div",{class:"result-type"},"文章",-1)),(0,t.Lk)("h3",{onClick:l=>e.$router.push(`/article/${a.id}`)},(0,n.v_)(a.title),9,c),(0,t.Lk)("p",{class:"result-summary",innerHTML:C.highlightKeyword(a.summary)},null,8,v),(0,t.Lk)("div",d,[(0,t.Lk)("span",null,[l[4]||(l[4]=(0,t.Lk)("i",{class:"el-icon-user"},null,-1)),(0,t.eW)(" "+(0,n.v_)(a.author),1)]),(0,t.Lk)("span",null,[l[5]||(l[5]=(0,t.Lk)("i",{class:"el-icon-date"},null,-1)),(0,t.eW)(" "+(0,n.v_)(a.publishDate),1)]),(0,t.Lk)("span",null,[l[6]||(l[6]=(0,t.Lk)("i",{class:"el-icon-collection-tag"},null,-1)),(0,t.eW)(" "+(0,n.v_)(a.category),1)]),(0,t.Lk)("span",null,[l[7]||(l[7]=(0,t.Lk)("i",{class:"el-icon-view"},null,-1)),(0,t.eW)(" "+(0,n.v_)(a.viewCount)+" 阅读",1)])])])))),128))])):(0,t.Q3)("",!0),"all"===C.contentType||"comment"===C.contentType?((0,t.uX)(),(0,t.CE)("div",h,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(C.commentResults,(a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"result-item"},[l[12]||(l[12]=(0,t.Lk)("div",{class:"result-type"},"评论",-1)),(0,t.Lk)("div",m,[(0,t.Lk)("div",{class:"comment-content",innerHTML:C.highlightKeyword(a.content)},null,8,g),(0,t.Lk)("div",p,[l[9]||(l[9]=(0,t.eW)(" 来自文章: ")),(0,t.Lk)("a",{onClick:l=>e.$router.push(`/article/${a.articleId}`)},(0,n.v_)(a.articleTitle),9,k)])]),(0,t.Lk)("div",y,[(0,t.Lk)("span",null,[l[10]||(l[10]=(0,t.Lk)("i",{class:"el-icon-user"},null,-1)),(0,t.eW)(" "+(0,n.v_)(a.username),1)]),(0,t.Lk)("span",null,[l[11]||(l[11]=(0,t.Lk)("i",{class:"el-icon-date"},null,-1)),(0,t.eW)(" "+(0,n.v_)(a.date),1)])])])))),128))])):(0,t.Q3)("",!0)],64))]),(0,t.Lk)("div",b,[(0,t.bF)($,{background:"",layout:"prev, pager, next",total:C.total,"page-size":C.pageSize,"current-page":C.currentPage,onCurrentChange:C.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])}a(8111),a(2489);var L=a(144),F=a(1387),f=a(1219),w={name:"SearchView",setup(){const e=(0,F.lq)(),l=((0,F.rd)(),(0,L.KR)([])),a=(0,L.KR)(!1),n=(0,L.KR)(0),u=(0,L.KR)(1),r=(0,L.KR)(10),o=(0,L.KR)("all"),i=(0,L.KR)(""),s=(0,L.KR)("all"),c=(0,L.KR)("relevance"),v=(0,t.EW)((()=>e.query.keyword||"")),d=[{id:"1",name:"技术"},{id:"2",name:"生活"},{id:"3",name:"随笔"},{id:"4",name:"教程"}],h=(0,t.EW)((()=>l.value.filter((e=>"article"===e.type)))),m=(0,t.EW)((()=>l.value.filter((e=>"comment"===e.type)))),g=async()=>{if(!v.value)return l.value=[],void(n.value=0);a.value=!0;try{v.value,u.value,r.value,o.value,i.value,s.value,c.value;setTimeout((()=>{let e=[];if("all"===o.value||"article"===o.value){const l="all"===o.value?6:10,a=Array.from({length:l},((e,l)=>({id:`article-${u.value}-${l}`,type:"article",title:`包含"${v.value}"的文章标题 ${u.value}-${l}`,summary:`这是一篇关于${v.value}的文章摘要，详细介绍了相关内容和应用场景...`,author:"作者名称",publishDate:(new Date).toLocaleDateString(),category:d[Math.floor(Math.random()*d.length)].name,viewCount:Math.floor(1e3*Math.random())})));e=[...e,...a]}if("all"===o.value||"comment"===o.value){const l="all"===o.value?4:10,a=Array.from({length:l},((e,l)=>({id:`comment-${u.value}-${l}`,type:"comment",content:`这是一条包含"${v.value}"关键词的评论内容，表达了对文章的看法和建议...`,username:`用户${Math.floor(1e3*Math.random())}`,date:(new Date).toLocaleDateString(),articleId:`article-${l}`,articleTitle:`文章标题 ${l}`})));e=[...e,...a]}l.value=e,n.value=100,a.value=!1}),500)}catch(e){f.nk.error("搜索失败"),a.value=!1}},p=e=>{if(!v.value)return e;const l=new RegExp(`(${v.value})`,"gi");return e.replace(l,'<span class="highlight">$1</span>')},k=()=>{u.value=1,g()},y=e=>{u.value=e,g()};return(0,t.wB)((()=>e.query.keyword),(()=>{u.value=1,o.value="all",i.value="",s.value="all",c.value="relevance",g()})),(0,t.sV)((()=>{g()})),{results:l,articleResults:h,commentResults:m,loading:a,total:n,currentPage:u,pageSize:r,searchKeyword:v,contentType:o,categoryFilter:i,timeFilter:s,sortOption:c,categories:d,highlightKeyword:p,handleFilterChange:k,handlePageChange:y}}},K=a(1241);const $=(0,K.A)(w,[["render",C],["__scopeId","data-v-2ea1a92f"]]);var _=$}}]);
//# sourceMappingURL=209.655265b6.js.map