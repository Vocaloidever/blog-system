"use strict";(self["webpackChunkblog_system"]=self["webpackChunkblog_system"]||[]).push([[633],{2633:function(e,t,i){i.r(t),i.d(t,{default:function(){return te}});var l=i(6768),a=i(4232);const s={class:"settings-container"},o={class:"settings-section"},n={class:"settings-options"},c={class:"settings-options"},d={class:"settings-options"},u={class:"settings-options"},m={class:"settings-section"},r={class:"settings-options"},v={class:"settings-options"},g={class:"settings-options"},p={class:"settings-options"},k={class:"settings-actions"},f={class:"settings-section"},V={class:"settings-options"},b={class:"settings-section"},S={class:"settings-options"},L={class:"settings-options"},y={class:"settings-section"},_={class:"settings-options"},w={class:"settings-options"},F={class:"settings-actions"},h={class:"settings-section"},C={class:"settings-options"},E={key:0,class:"setting-description"},x={class:"settings-options"},T={class:"settings-section"},A={class:"active-sessions"},U={class:"session-info"},D={class:"session-device"},W={key:0,class:"el-icon-monitor"},K={key:1,class:"el-icon-mobile"},R={class:"session-details"},N={class:"session-time"},P={class:"session-actions"},X={class:"settings-actions"},B={class:"settings-section"},z={class:"danger-zone"},I={class:"dialog-content"},j={class:"dialog-footer"},O={class:"dialog-content"},Q={class:"dialog-footer"};function q(e,t,i,q,G,H){const J=(0,l.g2)("el-switch"),M=(0,l.g2)("el-button"),Y=(0,l.g2)("el-tab-pane"),Z=(0,l.g2)("el-radio"),$=(0,l.g2)("el-radio-group"),ee=(0,l.g2)("el-tabs"),te=(0,l.g2)("el-card"),ie=(0,l.g2)("el-input"),le=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(te,{class:"settings-card"},{header:(0,l.k6)((()=>t[23]||(t[23]=[(0,l.Lk)("div",{class:"card-header"},[(0,l.Lk)("h2",null,"账号设置")],-1)]))),default:(0,l.k6)((()=>[(0,l.bF)(ee,{modelValue:q.activeTab,"onUpdate:modelValue":t[15]||(t[15]=e=>q.activeTab=e)},{default:(0,l.k6)((()=>[(0,l.bF)(Y,{label:"通知设置",name:"notifications"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",o,[t[24]||(t[24]=(0,l.Lk)("h3",null,"邮件通知",-1)),(0,l.Lk)("div",n,[(0,l.bF)(J,{modelValue:q.notificationSettings.commentEmail,"onUpdate:modelValue":t[0]||(t[0]=e=>q.notificationSettings.commentEmail=e),"active-text":"收到评论时发送邮件"},null,8,["modelValue"])]),(0,l.Lk)("div",c,[(0,l.bF)(J,{modelValue:q.notificationSettings.replyEmail,"onUpdate:modelValue":t[1]||(t[1]=e=>q.notificationSettings.replyEmail=e),"active-text":"收到回复时发送邮件"},null,8,["modelValue"])]),(0,l.Lk)("div",d,[(0,l.bF)(J,{modelValue:q.notificationSettings.likeEmail,"onUpdate:modelValue":t[2]||(t[2]=e=>q.notificationSettings.likeEmail=e),"active-text":"文章被点赞时发送邮件"},null,8,["modelValue"])]),(0,l.Lk)("div",u,[(0,l.bF)(J,{modelValue:q.notificationSettings.newsletterEmail,"onUpdate:modelValue":t[3]||(t[3]=e=>q.notificationSettings.newsletterEmail=e),"active-text":"接收每周精选文章推送"},null,8,["modelValue"])])]),(0,l.Lk)("div",m,[t[25]||(t[25]=(0,l.Lk)("h3",null,"站内通知",-1)),(0,l.Lk)("div",r,[(0,l.bF)(J,{modelValue:q.notificationSettings.commentSite,"onUpdate:modelValue":t[4]||(t[4]=e=>q.notificationSettings.commentSite=e),"active-text":"收到评论时通知"},null,8,["modelValue"])]),(0,l.Lk)("div",v,[(0,l.bF)(J,{modelValue:q.notificationSettings.replySite,"onUpdate:modelValue":t[5]||(t[5]=e=>q.notificationSettings.replySite=e),"active-text":"收到回复时通知"},null,8,["modelValue"])]),(0,l.Lk)("div",g,[(0,l.bF)(J,{modelValue:q.notificationSettings.likeSite,"onUpdate:modelValue":t[6]||(t[6]=e=>q.notificationSettings.likeSite=e),"active-text":"文章被点赞时通知"},null,8,["modelValue"])]),(0,l.Lk)("div",p,[(0,l.bF)(J,{modelValue:q.notificationSettings.followSite,"onUpdate:modelValue":t[7]||(t[7]=e=>q.notificationSettings.followSite=e),"active-text":"有新粉丝时通知"},null,8,["modelValue"])])]),(0,l.Lk)("div",k,[(0,l.bF)(M,{type:"primary",onClick:q.saveNotificationSettings,loading:q.saving},{default:(0,l.k6)((()=>t[26]||(t[26]=[(0,l.eW)(" 保存设置 ")]))),_:1,__:[26]},8,["onClick","loading"])])])),_:1}),(0,l.bF)(Y,{label:"隐私设置",name:"privacy"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",f,[t[30]||(t[30]=(0,l.Lk)("h3",null,"个人资料可见性",-1)),(0,l.Lk)("div",V,[(0,l.bF)($,{modelValue:q.privacySettings.profileVisibility,"onUpdate:modelValue":t[8]||(t[8]=e=>q.privacySettings.profileVisibility=e)},{default:(0,l.k6)((()=>[(0,l.bF)(Z,{label:"public"},{default:(0,l.k6)((()=>t[27]||(t[27]=[(0,l.eW)("公开 - 所有人可见")]))),_:1,__:[27]}),(0,l.bF)(Z,{label:"registered"},{default:(0,l.k6)((()=>t[28]||(t[28]=[(0,l.eW)("仅注册用户可见")]))),_:1,__:[28]}),(0,l.bF)(Z,{label:"private"},{default:(0,l.k6)((()=>t[29]||(t[29]=[(0,l.eW)("私密 - 仅自己可见")]))),_:1,__:[29]})])),_:1},8,["modelValue"])])]),(0,l.Lk)("div",b,[t[31]||(t[31]=(0,l.Lk)("h3",null,"评论设置",-1)),(0,l.Lk)("div",S,[(0,l.bF)(J,{modelValue:q.privacySettings.allowComments,"onUpdate:modelValue":t[9]||(t[9]=e=>q.privacySettings.allowComments=e),"active-text":"允许他人在我的文章下评论"},null,8,["modelValue"])]),(0,l.Lk)("div",L,[(0,l.bF)(J,{modelValue:q.privacySettings.commentApproval,"onUpdate:modelValue":t[10]||(t[10]=e=>q.privacySettings.commentApproval=e),"active-text":"评论需要我的审核后才能显示"},null,8,["modelValue"])])]),(0,l.Lk)("div",y,[t[32]||(t[32]=(0,l.Lk)("h3",null,"数据使用",-1)),(0,l.Lk)("div",_,[(0,l.bF)(J,{modelValue:q.privacySettings.allowAnalytics,"onUpdate:modelValue":t[11]||(t[11]=e=>q.privacySettings.allowAnalytics=e),"active-text":"允许收集使用数据以改善服务"},null,8,["modelValue"])]),(0,l.Lk)("div",w,[(0,l.bF)(J,{modelValue:q.privacySettings.allowRecommendations,"onUpdate:modelValue":t[12]||(t[12]=e=>q.privacySettings.allowRecommendations=e),"active-text":"根据我的兴趣推荐内容"},null,8,["modelValue"])])]),(0,l.Lk)("div",F,[(0,l.bF)(M,{type:"primary",onClick:q.savePrivacySettings,loading:q.saving},{default:(0,l.k6)((()=>t[33]||(t[33]=[(0,l.eW)(" 保存设置 ")]))),_:1,__:[33]},8,["onClick","loading"])])])),_:1}),(0,l.bF)(Y,{label:"账号安全",name:"security"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",h,[t[34]||(t[34]=(0,l.Lk)("h3",null,"登录安全",-1)),(0,l.Lk)("div",C,[(0,l.bF)(J,{modelValue:q.securitySettings.twoFactorAuth,"onUpdate:modelValue":t[13]||(t[13]=e=>q.securitySettings.twoFactorAuth=e),"active-text":"启用两步验证"},null,8,["modelValue"]),q.securitySettings.twoFactorAuth?((0,l.uX)(),(0,l.CE)("div",E," 两步验证可以提高账号安全性，登录时需要输入手机验证码 ")):(0,l.Q3)("",!0)]),(0,l.Lk)("div",x,[(0,l.bF)(J,{modelValue:q.securitySettings.loginNotification,"onUpdate:modelValue":t[14]||(t[14]=e=>q.securitySettings.loginNotification=e),"active-text":"新设备登录时通知我"},null,8,["modelValue"])])]),(0,l.Lk)("div",T,[t[36]||(t[36]=(0,l.Lk)("h3",null,"会话管理",-1)),(0,l.Lk)("div",A,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(q.activeSessions,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"session-item"},[(0,l.Lk)("div",U,[(0,l.Lk)("div",D,["desktop"===e.deviceType?((0,l.uX)(),(0,l.CE)("i",W)):((0,l.uX)(),(0,l.CE)("i",K)),(0,l.eW)(" "+(0,a.v_)(e.deviceName),1)]),(0,l.Lk)("div",R,[(0,l.Lk)("div",null,(0,a.v_)(e.location),1),(0,l.Lk)("div",N,(0,a.v_)(e.lastActive),1)])]),(0,l.Lk)("div",P,[(0,l.bF)(M,{size:"small",type:"danger",plain:"",onClick:e=>q.terminateSession(t),disabled:e.current},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.current?"当前会话":"退出"),1)])),_:2},1032,["onClick","disabled"])])])))),128))]),(0,l.Lk)("div",X,[(0,l.bF)(M,{type:"warning",onClick:q.terminateAllSessions},{default:(0,l.k6)((()=>t[35]||(t[35]=[(0,l.eW)("退出所有其他设备")]))),_:1,__:[35]},8,["onClick"])])]),(0,l.Lk)("div",B,[t[39]||(t[39]=(0,l.Lk)("h3",null,"账号操作",-1)),(0,l.Lk)("div",z,[(0,l.bF)(M,{type:"danger",onClick:q.showDeactivateDialog},{default:(0,l.k6)((()=>t[37]||(t[37]=[(0,l.eW)("停用账号")]))),_:1,__:[37]},8,["onClick"]),(0,l.bF)(M,{type:"danger",onClick:q.showDeleteDialog},{default:(0,l.k6)((()=>t[38]||(t[38]=[(0,l.eW)("删除账号")]))),_:1,__:[38]},8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(le,{title:"停用账号",modelValue:q.deactivateDialogVisible,"onUpdate:modelValue":t[18]||(t[18]=e=>q.deactivateDialogVisible=e),width:"500px"},{footer:(0,l.k6)((()=>[(0,l.Lk)("span",j,[(0,l.bF)(M,{onClick:t[17]||(t[17]=e=>q.deactivateDialogVisible=!1)},{default:(0,l.k6)((()=>t[42]||(t[42]=[(0,l.eW)("取消")]))),_:1,__:[42]}),(0,l.bF)(M,{type:"danger",onClick:q.deactivateAccount,loading:q.processing},{default:(0,l.k6)((()=>t[43]||(t[43]=[(0,l.eW)(" 确认停用 ")]))),_:1,__:[43]},8,["onClick","loading"])])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",I,[t[40]||(t[40]=(0,l.Lk)("p",null,"停用账号后，您的个人资料将不再对其他用户可见，但您的数据将被保留。您可以随时重新激活账号。",-1)),t[41]||(t[41]=(0,l.Lk)("p",null,"请输入密码确认操作：",-1)),(0,l.bF)(ie,{modelValue:q.confirmPassword,"onUpdate:modelValue":t[16]||(t[16]=e=>q.confirmPassword=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])])),_:1},8,["modelValue"]),(0,l.bF)(le,{title:"删除账号",modelValue:q.deleteDialogVisible,"onUpdate:modelValue":t[22]||(t[22]=e=>q.deleteDialogVisible=e),width:"500px"},{footer:(0,l.k6)((()=>[(0,l.Lk)("span",Q,[(0,l.bF)(M,{onClick:t[21]||(t[21]=e=>q.deleteDialogVisible=!1)},{default:(0,l.k6)((()=>t[48]||(t[48]=[(0,l.eW)("取消")]))),_:1,__:[48]}),(0,l.bF)(M,{type:"danger",onClick:q.deleteAccount,loading:q.processing,disabled:"DELETE"!==q.deleteConfirmText},{default:(0,l.k6)((()=>t[49]||(t[49]=[(0,l.eW)(" 永久删除账号 ")]))),_:1,__:[49]},8,["onClick","loading","disabled"])])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",O,[t[44]||(t[44]=(0,l.Lk)("p",{class:"warning-text"},"警告：此操作不可逆！",-1)),t[45]||(t[45]=(0,l.Lk)("p",null,"删除账号将永久移除您的所有数据，包括文章、评论和个人资料。此操作无法撤销。",-1)),t[46]||(t[46]=(0,l.Lk)("p",null,'请输入"DELETE"确认操作：',-1)),(0,l.bF)(ie,{modelValue:q.deleteConfirmText,"onUpdate:modelValue":t[19]||(t[19]=e=>q.deleteConfirmText=e),placeholder:"请输入DELETE"},null,8,["modelValue"]),t[47]||(t[47]=(0,l.Lk)("p",null,"请输入密码确认操作：",-1)),(0,l.bF)(ie,{modelValue:q.confirmPassword,"onUpdate:modelValue":t[20]||(t[20]=e=>q.confirmPassword=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])])),_:1},8,["modelValue"])])}i(4114),i(8111),i(2489);var G=i(144),H=i(1387),J=i(782),M=i(1219),Y=i(2933),Z={name:"SettingsView",setup(){const e=(0,H.rd)(),t=(0,J.Pj)(),i=(0,G.KR)("notifications"),a=(0,G.KR)(!1),s=(0,G.KR)(!1),o=(0,G.KR)(!1),n=(0,G.KR)(!1),c=(0,G.KR)(""),d=(0,G.KR)(""),u=(0,G.Kh)({commentEmail:!0,replyEmail:!0,likeEmail:!1,newsletterEmail:!0,commentSite:!0,replySite:!0,likeSite:!0,followSite:!0}),m=(0,G.Kh)({profileVisibility:"public",allowComments:!0,commentApproval:!1,allowAnalytics:!0,allowRecommendations:!0}),r=(0,G.Kh)({twoFactorAuth:!1,loginNotification:!0}),v=(0,G.KR)([{deviceType:"desktop",deviceName:"Windows 10 - Chrome",location:"北京, 中国",lastActive:"当前活跃",current:!0},{deviceType:"mobile",deviceName:"iPhone 13 - Safari",location:"上海, 中国",lastActive:"2023-05-18 14:30",current:!1},{deviceType:"desktop",deviceName:"macOS - Firefox",location:"广州, 中国",lastActive:"2023-05-15 09:45",current:!1}]),g=()=>{a.value=!0,setTimeout((()=>{M.nk.success("通知设置已保存"),a.value=!1}),800)},p=()=>{a.value=!0,setTimeout((()=>{M.nk.success("隐私设置已保存"),a.value=!1}),800)},k=e=>{Y.s.confirm("确定要退出该设备的登录状态吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{v.value.splice(e,1),M.nk.success("已成功退出该设备")})).catch((()=>{}))},f=()=>{Y.s.confirm("确定要退出所有其他设备的登录状态吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{v.value=v.value.filter((e=>e.current)),M.nk.success("已成功退出所有其他设备")})).catch((()=>{}))},V=()=>{c.value="",o.value=!0},b=()=>{c.value="",d.value="",n.value=!0},S=()=>{c.value?(s.value=!0,setTimeout((()=>{s.value=!1,o.value=!1,M.nk.success("账号已停用"),t.dispatch("user/logout"),e.push("/login")}),1500)):M.nk.warning("请输入密码")},L=()=>{c.value?"DELETE"===d.value?(s.value=!0,setTimeout((()=>{s.value=!1,n.value=!1,M.nk.success("账号已永久删除"),t.dispatch("user/logout"),e.push("/")}),1500)):M.nk.warning("请输入正确的确认文本"):M.nk.warning("请输入密码")};return(0,l.sV)((()=>{})),{activeTab:i,notificationSettings:u,privacySettings:m,securitySettings:r,activeSessions:v,saving:a,processing:s,deactivateDialogVisible:o,deleteDialogVisible:n,confirmPassword:c,deleteConfirmText:d,saveNotificationSettings:g,savePrivacySettings:p,terminateSession:k,terminateAllSessions:f,showDeactivateDialog:V,showDeleteDialog:b,deactivateAccount:S,deleteAccount:L}}},$=i(1241);const ee=(0,$.A)(Z,[["render",q],["__scopeId","data-v-e0589588"]]);var te=ee}}]);
//# sourceMappingURL=633.b9c9b6d5.js.map